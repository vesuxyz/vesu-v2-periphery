[package]
name = "vesu_v2_periphery"
version = "0.1.0"
cairo-version = "=2.11.4"
edition = "2024_07"
license = "BUSL-1.1"

[lib]

[[target.starknet-contract]]
casm = true
sierra = true
build-external-contracts = ["vesu::test::mock_oracle::MockPragmaOracle"]

[dependencies]
starknet = "2.11.4"
alexandria_math = { git = "https://github.com/keep-starknet-strange/alexandria.git", rev = "c804e98" }
ekubo = { git = "https://github.com/EkuboProtocol/abis", commit = "f4a16b95967c5596d5a3cd4e0422bb9a2e3eb017" }
vesu = { git = "https://github.com/vesuxyz/vesu-v2", commit = "7970bda9d27e2f21823148be81b3158c0546a9d3" }

[dev-dependencies]
snforge_std = { git = "https://github.com/foundry-rs/starknet-foundry", tag = "v0.46.0" }

[tool.fmt]
max-line-length = 120
sort-module-level-items = true

[[tool.snforge.fork]]
name = "Mainnet"
url = "https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_8/rdvL5iHyAP1ZHb84DY8JR"
block_id.number = "3494530"

[tool.voyager]
liquidate = { path = "src/liquidate.cairo" }
multiply = { path = "src/multiply.cairo" }

[scripts]
buildRelease = "scarb --profile release build"
deployMultiply = "scarb --profile release build && node --loader ts-node/esm ./scripts/deployMultiply.ts"
deployLiquidate = "scarb --profile release build && node --loader ts-node/esm ./scripts/deployLiquidate.ts"
test = "snforge test --max-n-steps 100000000 'test_migrate_position_from_v1_legacy_usdc_to_new_usdc_collateral_asset'"
